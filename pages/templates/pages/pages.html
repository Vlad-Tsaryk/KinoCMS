{% extends "layout/basic.html" %}
{% load static %}
{% load i18n %}
{% block content %}

    <div class="card card-secondary">
        <div class="card-header">
            <h4 class="card-title">{% trans 'Страницы' %}</h4>
        </div>
        <div class="card-body">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>{% trans 'Название' %}</th>
                    <th>{% trans 'Дата создания' %}</th>
                    <th>Статус</th>

                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>{% trans 'Главная страница' %}</td>
                    <td>{{ main_page.date }}</td>
                    <td>{% if main_page.active %}
                        {% trans 'Вкл' %}
                    {% else %}
                        {% trans 'Выкл' %}
                    {% endif %}</td>

                    <th class="border-0" width="48px"><a
                            href="{% url 'update_main_page' main_page.pk %}"
                    ><img height="48px"
                          src="{% static 'cinema/img/pencil.png' %}"></a>
                    </th>
                </tr>

                {% for page in static_pages %}
                    <tr>
                        <td>{{ page.name }}</td>
                        <td>{{ page.date }}</td>
                        <td>{% if page.active %}
                            {% trans 'Вкл' %}
                        {% else %}
                            {% trans 'Выкл' %}
                        {% endif %}</td>

                        <th class="border-0" width="48px"><a
                                href="{% url 'update_page' page.pk %}"
                        ><img height="48px"
                              src="{% static 'cinema/img/pencil.png' %}"></a>
                        </th>
                    </tr>
                {% endfor %}
                <tr>
                    <td>{% trans 'Контакты' %}</td>
                    <td>{{ contact_page.date }}</td>
                    <td>{% if contact_page.active %}
                        {% trans 'Вкл' %}
                    {% else %}
                        {% trans 'Выкл' %}
                    {% endif %}</td>

                    <th class="border-0" width="48px"><a
                            href="{% url 'contact_page' %}"
                    ><img height="48px"
                          src="{% static 'cinema/img/pencil.png' %}"></a>
                    </th>
                </tr>
                {% for page in pages %}
                    <tr>
                        <td>{{ page.name }}</td>
                        <td>{{ page.date }}</td>
                        <td>{% if page.active %}
                            {% trans 'Вкл' %}
                        {% else %}
                            {% trans 'Выкл' %}
                        {% endif %}</td>

                        <th class="border-0" width="48px"><a
                                href="{% url 'update_page' page.pk %}"
                        ><img height="48px"
                              src="{% static 'cinema/img/pencil.png' %}"></a>
                        </th>
                        <td class="border-0" width="48px"><a
                                onclick="delete_page(event,{{ page.pk }},'{{ page.name }}')"
                               style="cursor: pointer"
                        ><img height="48px"
                              src="{% static 'cinema/img/trash-can.png' %}"></a>
                        </td>
                    </tr>
                {% endfor %}

                </tbody>
            </table>
            <center>
                <a href="{% url 'add_page' %}" class="btn btn-secondary mt-3">{% trans 'Добавить страницу' %}</a>
            </center>
        </div>
    </div>


{% endblock %}
{% block scripts %}
    <script>
        $('#nav_pages').attr('class', 'nav-link active')
                function delete_page(event,id,name){
            alertify.confirm('{% trans 'Удалить страницу' %} - '+`${name} ?`,
                function () {
                    window.location.href = '{% url 'delete_page' page_id=12345  %}'.replace(/12345/, id);
                    alertify.success('{% trans 'Страница удалена' %}')
                },
                function () {
                }).set({labels: {ok: '{% trans 'Подтвердить' %}', cancel: '{% trans 'Отмена' %}'}});

        }
    </script>
{% endblock %}